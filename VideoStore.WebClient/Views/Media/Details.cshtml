@using Microsoft.AspNet.Identity
@model VideoStore.WebClient.ViewModels.MediaDetailsViewModel


@{
    ViewBag.Title = "Details";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>@Html.DisplayFor(x => Model.Media.Title) Details</h2>

<table>
    <tr>
        <td><strong>Title</strong></td>
        <td>@Html.DisplayFor(x => Model.Media.Title)</td>
    </tr>
    <tr>
        <td><strong>Director</strong></td>
        <td>@Html.DisplayFor(x => Model.Media.Director)</td>
    </tr>
    <tr>
        <td><strong>Genre</strong></td>
        <td>@Html.DisplayFor(x => Model.Media.Genre)</td>
    </tr>
    <tr>
        <td><strong>Price</strong></td>
        <td>@Html.DisplayFor(x => Model.Media.Price)</td>
    </tr>
    <tr>
        <td><strong>Stock Count</strong></td>
        <td>@Html.DisplayFor(x => Model.Media.StockCount)</td>
    </tr>
    <tr>
        <td><strong>Average Rating</strong></td>
        <td>@Html.DisplayFor(x => Model.Media.AverageRating)</td>
    </tr>
</table>
<br />
<div>
    <h3>Reviews</h3>
    <span>@Html.ActionLink("Create Review", "CreateReview", "Media", new { pMediaId = Model.Media.Id, pUser = User.Identity.GetUserId() }, null)</span>
</div>

<br/>

<div>
    @foreach (var review in Model.Reviews)
    {
        <h4>@review.Key.Title</h4>
        <p>Review by: @review.Value.Name (@review.Value.LocationString) | <small>@review.Key.Date</small></p>
        <p>@review.Key.Content</p>
        <p><strong>Rating: </strong>@review.Key.Rating/5</p>
        <hr/>
    }
</div>